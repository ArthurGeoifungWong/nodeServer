(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{Q6AD:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var r=l(a("W9HT"));a("IzEo");var d=l(a("bx4M"));a("2qtc");var u=l(a("kLXV")),o=l(a("lwsE")),c=l(a("W8MJ")),i=l(a("a1gu")),f=l(a("Nsbk")),m=l(a("7W2i"));a("5Dmo");var s=l(a("3S7+"));a("+L6B");var p=l(a("2/Rp"));a("+BJd");var E=l(a("mr32"));a("14J3");var g=l(a("BMrR"));a("iQDF");var v=l(a("+eQT")),h=l(a("pVnL"));a("jCWc");var S=l(a("kPKH"));a("5NDa");var k=l(a("5rEg"));a("y8nQ");var y=l(a("Vl3Y")),C=n(a("q1tI")),b=a("MuoO"),N=a("7DNP"),T=l(a("zHco")),D=l(a("IkuO")),M=a("d9J6"),x=l(a("wd/R"));a("XDpg");var w,V,B=l(a("mNfy"));x.default.locale("zh-cn");var Y=y.default.Item,L=k.default.TextArea,R=y.default.create({})(function(e){var t=e.form.getFieldDecorator,a=e.currentSave,l=e.infoSource,n=e.conType,r=e.linkContarct,d=e.openSelectContratc,u=e.modelNum,o={md:12,sm:24},c={labelCol:{span:7},wrapperCol:{span:13}};return C.default.createElement(y.default,{layout:"inline",className:B.default.addForm},C.default.createElement("h3",{className:B.default.inputBlockTitle},"\u5408\u540c\u6982\u51b5"),C.default.createElement(g.default,null,C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u5408\u540c\u540d\u79f0"},t("governmentname",{initialValue:l.governmentname,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u540d\u79f0"})))),C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u9879\u76ee\u6765\u6e90"},t("projectsource",{initialValue:l.projectsource,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u6765\u6e90"})))),C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u5408\u540c\u7f16\u53f7"},c),t("governmentno",{initialValue:"add"===n?u:l.governmentno,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u7f16\u53f7",disabled:!0,style:{color:"rgba(0,0,0,1)"}})))),C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u7b7e\u7ea6\u65e5\u671f"},c),t("governmentdateLong",{initialValue:l.governmentdateLong?(0,x.default)(l.governmentdateLong):null})(C.default.createElement(v.default,null)))),C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u8d23\u4efb\u90e8\u95e8"},c),t("responsibledepartment",{initialValue:l.responsibledepartment})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u8d23\u4efb\u90e8\u95e8"})))),C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u7ecf\u529e\u4eba"},c),t("responsibleperson",{initialValue:"add"===n?(0,M.getReal)():l.responsibleperson})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u7ecf\u529e\u4eba"})))),C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u5408\u4f5c\u65b9"},t("partner",{initialValue:l.partner})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u4f5c\u65b9"})))),C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u5907\u6ce8"},t("remark",{initialValue:l.remark})(C.default.createElement(L,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))),C.default.createElement("h3",{className:B.default.inputBlockTitle},"\u7ecf\u8d39\u60c5\u51b5"),C.default.createElement(g.default,null,C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u603b\u6295\u8d44"},c),t("totalinvestment",{initialValue:l.totalinvestment})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u603b\u6295\u8d44"})))),C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u653f\u5e9c\u8d44\u52a9"},c),t("governmentfunding",{initialValue:l.governmentfunding})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u653f\u5e9c\u8d44\u52a9"})))),C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u8d39\u7528\u7ea6\u5b9a"},t("costagreement",{initialValue:l.costagreement})(C.default.createElement(L,{placeholder:"\u8bf7\u8f93\u5165\u8d39\u7528\u7ea6\u5b9a"})))),C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u5408\u540c\u671f\u9650"},t("contractperiod",{initialValue:l.contractperiod})(C.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u671f\u9650"}))))),C.default.createElement("h3",{className:B.default.inputBlockTitle},"\u5408\u540c\u5173\u8054"),C.default.createElement(g.default,null,C.default.createElement(S.default,{className:B.default.lineTextarea},C.default.createElement(Y,{label:"\u5408\u540c\u5173\u8054\u60c5\u51b5"},""===r?"":r.split("\uff0c").map(function(e){return C.default.createElement(E.default,{color:"#108ee9",key:e},e)}),C.default.createElement(s.default,{placement:"topLeft",title:"\u70b9\u51fb\u9009\u62e9\u5173\u8054\u5408\u540c",arrowPointAtCenter:!0},C.default.createElement(p.default,{title:"\u9009\u62e9",onClick:function(){return d(!0)},size:"small",style:{marginRight:"10px",padding:"0px 20px"}},"\uff0b")),C.default.createElement("span",null,"\u5df2\u9009\u62e9:")," ",C.default.createElement("span",null,""===r?0:r.split("\uff0c").length,"\u4e2a"))),"edit"===n?C.default.createElement("div",null,C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u521b\u5efa\u65f6\u95f4"},c),C.default.createElement("div",null,(0,x.default)(l.createtime).format("YYYY-MM-DD HH:mm:ss")))),C.default.createElement(S.default,o,C.default.createElement(Y,(0,h.default)({label:"\u66f4\u65b0\u65f6\u95f4"},c),C.default.createElement("div",null,(0,x.default)(l.updatetime).format("YYYY-MM-DD HH:mm:ss"))))):""),C.default.createElement("div",{style:{textAlign:"center"}},C.default.createElement(p.default,{className:B.default.listDataBtn,type:"primary",icon:"check",title:"\u4fdd\u5b58",onClick:function(){return a(e)}},"\u4fdd\u5b58\u57fa\u672c\u4fe1\u606f")))}),q=(w=(0,b.connect)(function(e){var t=e.governmentdata,a=e.loading;return{governmentdata:t,loading:a.models.governmentdata}}),w(V=function(e){function t(){var e,a;(0,o.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,i.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={urlParams:"",loading:!1,infoSource:{},conType:"",showSelectModal:!1,linkContarct:"",modelNum:""},a.getModelNum=function(){var e=a.props.dispatch;a.setState({loading:!0}),e({type:"modelutil/getConNum",payload:{}}).then(function(e){if(e.statusCode)u.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)});else{var t=(0,x.default)().format("YYYYMMDD"),l="";l="GCI-11-ZF-".concat(t,"-").concat(e.data),a.setState({modelNum:l})}a.setState({loading:!1})})},a.currentSave=function(e){var t=a.state,l=t.urlParams,n=t.conType,r=t.linkContarct,d=a.props.dispatch,o=e.form;o.validateFields(function(e,t){if(!e){var o=t,c="";"add"===n?c="governmentdata/addData":(o.governmentid=l.governmentid,c="governmentdata/updateData"),o.governmentdateLong=t.governmentdateLong?(0,x.default)(t.governmentdateLong).valueOf():0,o.relatedcontractname=r,a.setState({loading:!0}),d({type:c,payload:o}).then(function(e){e.statusCode?(u.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({loading:!1})):(-1===e.code?u.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.msg,"\u8bf7\u70b9\u51fb\u786e\u5b9a\u6309\u94ae\u91cd\u65b0\u83b7\u53d6\u5408\u540c\u7f16\u53f7\u3002"),okText:"\u786e\u5b9a",onOk:function(){return a.getModelNum()}}):d(N.routerRedux.push({pathname:"/result/result-success",query:{resultType:"3"}})),a.setState({loading:!1}))})}})},a.returnBack=function(){var e=a.props.dispatch;e(N.routerRedux.push({pathname:"/compact/government-list"}))},a.openSelectContratc=function(e,t){var l=a.state.linkContarct;a.setState({showSelectModal:!!e}),t?(a.setState({linkContarct:t.join("\uff0c")}),a.selectData(t)):(a.child.getCon(),a.child.setState({condata:""===l?[]:l.split("\uff0c")}))},a.selectData=function(e){a.setState({linkContarct:e.join("\uff0c")})},a.onSelectRef=function(e){a.child=e},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.location,l=t.dispatch;"{}"!==JSON.stringify(a.query)?(this.setState({urlParams:a.query,loading:!0,conType:"edit"}),l({type:"governmentdata/infoData",payload:{governmentid:a.query.governmentid}}).then(function(t){t.statusCode?(u.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(t.statusCode)}),e.setState({loading:!1})):e.setState({infoSource:t.data,linkContarct:t.data.relatedcontractname,loading:!1})})):(this.setState({conType:"add"}),this.getModelNum())}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoSource,l=t.loading,n=t.conType,u=t.linkContarct,o=t.showSelectModal,c=t.modelNum,i="\u653f\u5e9c\u5408\u540c\u8be6\u60c5";"add"===n&&(i="\u65b0\u5efa\u653f\u5e9c\u5408\u540c");var f={infoSource:a,conType:n,modelNum:c},m={currentSave:this.currentSave,returnBack:this.returnBack,openSelectContratc:this.openSelectContratc},s={showModal:o,linkContarct:u},E={openSelectContratc:this.openSelectContratc,onSelectRef:this.onSelectRef};return C.default.createElement(T.default,{title:i},C.default.createElement(r.default,{spinning:l},C.default.createElement(d.default,{bordered:!1},C.default.createElement("div",{className:B.default.tableList},C.default.createElement("div",{className:B.default.reBtnLine,style:{borderBottom:"1px dashed #eee"}},C.default.createElement(p.default,{className:B.default.reBtn,type:"danger",icon:"rollback",onClick:function(){e.returnBack()}},"\u8fd4\u56de\u4e0a\u4e00\u7ea7")),C.default.createElement(R,(0,h.default)({},f,m,{linkContarct:u}))))),C.default.createElement(D.default,(0,h.default)({},s,E)))}}]),t}(C.PureComponent))||V),P=q;t.default=P}}]);