(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{B44N:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(a("pVnL"));a("IzEo");var d=l(a("bx4M"));a("14J3");var o=l(a("BMrR"));a("+L6B");var u=l(a("2/Rp"));a("jCWc");var i=l(a("kPKH"));a("5NDa");var m=l(a("5rEg")),c=l(a("MVZn"));a("/zsF");var f=l(a("PArb")),s=l(a("lwsE")),p=l(a("W8MJ")),v=l(a("a1gu")),h=l(a("Nsbk")),g=l(a("7W2i"));a("2qtc");var E=l(a("kLXV"));a("Pwec");var y=l(a("CtXQ"));a("y8nQ");var b,k,F,S=l(a("Vl3Y")),C=n(a("q1tI")),M=a("MuoO"),R=a("7DNP"),V=l(a("CkN6")),w=l(a("zHco")),x=l(a("wd/R")),D=l(a("A4CJ")),N=S.default.Item,j=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},A=S.default.create()(function(e){var t=e.removeModalVisible,a=e.handleRemove,l=e.handleRemoveModalVisible,n=e.record,r=function(){a(n.governmentid)};return C.default.createElement(E.default,{destroyOnClose:!0,title:"\u5220\u9664\u653f\u5e9c\u5408\u540c",visible:t,maskClosable:!1,style:{paddingBottom:"200px"},onOk:r,onCancel:function(){return l("",n)}},C.default.createElement("div",{className:D.default.deleteIcon},C.default.createElement(y.default,{type:"delete",theme:"outlined"})),C.default.createElement("div",{className:D.default.deleteCont},"\u786e\u5b9a\u8981\u5220\u9664\u653f\u5e9c\u5408\u540c\u7f16\u53f7\u4e3a\u3010",C.default.createElement("span",null,n.governmentno),"\u3011\u7684\u6570\u636e\u5417\uff1f"))}),L=(b=(0,M.connect)(function(e){var t=e.governmentdata,a=e.loading;return{governmentdata:t,loading:a.models.governmentdata}}),k=S.default.create(),b(F=k(F=function(e){function t(){var e,a;(0,s.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,v.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={expandForm:!1,removeModalVisible:!1,dataSource:{}},a.columns=[{title:"\u5408\u540c\u7f16\u53f7",dataIndex:"governmentno",key:"governmentno"},{title:"\u5408\u540c\u540d\u79f0",dataIndex:"governmentname",key:"governmentname"},{title:"\u9879\u76ee\u6765\u6e90",dataIndex:"projectsource",key:"projectsource"},{title:"\u7ecf\u529e\u4eba",dataIndex:"responsibleperson",key:"responsibleperson"},{title:"\u7b7e\u7ea6\u65e5\u671f",dataIndex:"governmentdate",key:"governmentdate",render:function(e){return C.default.createElement("span",null,e?(0,x.default)(e).format("YYYY-MM-DD"):"")}},{title:"\u64cd\u4f5c",render:function(e,t){return C.default.createElement(C.Fragment,null,C.default.createElement("a",{style:{whiteSpace:"nowrap"},onClick:function(){return a.handleEdit(t)}},"\u7f16\u8f91"),C.default.createElement(f.default,{type:"vertical"}),C.default.createElement("a",{style:{color:"red",whiteSpace:"nowrap"},onClick:function(){return a.handleRemoveModalVisible(!0,t)}},"\u5220\u9664"))}}],a.handleStandardTableChange=function(e,t,l){var n=a.props.dispatch,r=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,c.default)({},e);return l[a]=j(t[a]),l},{}),o=(0,c.default)({currentPage:e.current,pageSize:e.pageSize},r,d);l.field&&(o.sorter="".concat(l.field,"_").concat(l.order)),n({type:"governmentdata/getData",payload:o})},a.publicGetData=function(e,t){t.validateFields(function(t,l){if(!t){var n=l,r=(0,c.default)({},n,{updatedAt:n.updatedAt&&n.updatedAt.valueOf()});a.setState({formValues:r}),e({type:"governmentdata/getData",payload:r})}})},a.handleFormReset=function(){var e=a.props,t=e.form;e.dispatch;t.resetFields(),a.setState({formValues:{}})},a.jumpToAdd=function(){var e=a.props.dispatch;e(R.routerRedux.push({pathname:"/compact/government-detail"}))},a.handleEdit=function(e){var t=a.props.dispatch;t(R.routerRedux.push({pathname:"/compact/government-detail",query:{governmentid:e.governmentid}}))},a.handleRemoveModalVisible=function(e,t){a.setState({removeModalVisible:!!e,dataSource:t})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form;a.publicGetData(l,n)},a.handleRemove=function(e){var t={governmentid:e},l=a.props,n=l.dispatch,r=l.form;n({type:"governmentdata/removeData",payload:t}).then(function(e){e.statusCode?E.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):E.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:"\u5220\u9664\u6210\u529f\uff01",onOk:function(){a.setState({removeModalVisible:!1}),a.publicGetData(n,r)}})})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t={currentPage:1,pageSize:10};e({type:"governmentdata/getData",payload:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return C.default.createElement(S.default,{onSubmit:this.handleSearch,layout:"inline"},C.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},C.default.createElement(i.default,{md:8,sm:24},C.default.createElement(N,{label:"\u5408\u540c\u540d\u79f0"},e("governmentname")(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u540d\u79f0"})))),C.default.createElement(i.default,{md:8,sm:24},C.default.createElement(N,{label:"\u5408\u540c\u7f16\u53f7"},e("governmentno")(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u534f\u8bae\u7f16\u53f7"})))),C.default.createElement(i.default,{md:8,sm:24},C.default.createElement("span",{className:D.default.submitButtons},C.default.createElement(u.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),C.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),C.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",C.default.createElement(y.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator;return C.default.createElement(S.default,{onSubmit:this.handleSearch,layout:"inline"},C.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},C.default.createElement(i.default,{md:8,sm:24},C.default.createElement(N,{label:"\u5408\u540c\u540d\u79f0"},e("governmentname")(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u540d\u79f0"})))),C.default.createElement(i.default,{md:8,sm:24},C.default.createElement(N,{label:"\u5408\u540c\u7f16\u53f7"},e("governmentno")(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u534f\u8bae\u7f16\u53f7"})))),C.default.createElement(i.default,{md:8,sm:24},C.default.createElement(N,{label:"\u9879\u76ee\u6765\u6e90"},e("projectsource")(C.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u6765\u6e90"}))))),C.default.createElement("div",{style:{overflow:"hidden"}},C.default.createElement("div",{style:{float:"right",marginBottom:24}},C.default.createElement(u.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),C.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),C.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",C.default.createElement(y.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.governmentdata.data,l=t.loading,n=this.state,o=n.removeModalVisible,i=n.dataSource,m={handleRemove:this.handleRemove,handleRemoveModalVisible:this.handleRemoveModalVisible,record:i};return C.default.createElement(w.default,{title:"\u653f\u5e9c\u5408\u540c"},C.default.createElement(d.default,{bordered:!1},C.default.createElement("div",{className:D.default.tableList},C.default.createElement("div",{className:D.default.tableListForm},this.renderForm()),C.default.createElement("div",{className:D.default.tableListOperator},C.default.createElement(u.default,{icon:"plus",type:"primary",onClick:function(){return e.jumpToAdd()}},"\u65b0\u5efa")),C.default.createElement(V.default,{loading:l,data:a,rowKey:"governmentid",columns:this.columns,onChange:this.handleStandardTableChange}))),C.default.createElement(A,(0,r.default)({},m,{removeModalVisible:o})))}}]),t}(C.PureComponent))||F)||F),I=L;t.default=I}}]);