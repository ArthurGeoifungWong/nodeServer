(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{qLEy:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("pVnL"));a("IzEo");var d=l(a("bx4M"));a("14J3");var u=l(a("BMrR"));a("+L6B");var c=l(a("2/Rp"));a("jCWc");var o=l(a("kPKH"));a("5NDa");var f=l(a("5rEg")),i=l(a("MVZn"));a("/zsF");var m=l(a("PArb"));a("+BJd");var s=l(a("mr32"));a("Awhp");var p=l(a("KrTs")),v=l(a("lwsE")),E=l(a("W8MJ")),h=l(a("a1gu")),b=l(a("Nsbk")),y=l(a("7W2i"));a("2qtc");var g=l(a("kLXV"));a("Pwec");var k=l(a("CtXQ"));a("iQDF");var F=l(a("+eQT"));a("OaEy");var w=l(a("2fM7"));a("y8nQ");var M=l(a("Vl3Y")),S=r(a("q1tI")),V=a("MuoO"),C=a("7DNP"),x=l(a("CkN6")),R=l(a("zHco")),D=l(a("wd/R"));a("XDpg");var A,L,O,N=l(a("A4CJ"));D.default.locale("zh-cn");var I=M.default.Item,P=w.default.Option,z=F.default.MonthPicker,T=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},B=M.default.create()(function(e){var t=e.removeModalVisible,a=e.handleRemove,l=e.handleRemoveModalVisible,r=e.record,n=function(){a(r.contractid)};return S.default.createElement(g.default,{destroyOnClose:!0,title:"\u5220\u9664\u5408\u540c",visible:t,maskClosable:!1,style:{paddingBottom:"200px"},onOk:n,onCancel:function(){return l("",r)}},S.default.createElement("div",{className:N.default.deleteIcon},S.default.createElement(k.default,{type:"delete",theme:"outlined"})),S.default.createElement("div",{className:N.default.deleteCont},"\u786e\u5b9a\u8981\u5220\u9664\u5408\u540c\u7f16\u53f7\u4e3a\u3010",S.default.createElement("span",null,r.contractno),"\u3011\u7684\u6570\u636e\u5417\uff1f"))}),J=(A=(0,V.connect)(function(e){var t=e.contractdata,a=e.loading;return{contractdata:t,loading:a.models.contractdata}}),L=M.default.create(),A(O=L(O=function(e){function t(){var e,a;(0,v.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,h.default)(this,(e=(0,b.default)(t)).call.apply(e,[this].concat(r))),a.state={removeModalVisible:!1,expandForm:!1,formValues:{},dataSource:{}},a.columns=[{title:"\u5408\u540c\u7f16\u53f7",dataIndex:"contractno",key:"contractno"},{title:"\u5408\u4f5c\u65b9",dataIndex:"suppliername",key:"suppliername"},{title:"\u6d41\u7a0b\u72b6\u6001",dataIndex:"contractstatus",key:"contractstatus",render:function(e){var t;switch(e){case 1:t=S.default.createElement(p.default,{status:"warning",text:"\u5f85\u76d6\u7ae0"});break;case 2:t=S.default.createElement(p.default,{status:"success",text:"\u5f85\u5f52\u6863"});break;case 3:t=S.default.createElement(p.default,{status:"processing",text:"\u6267\u884c\u4e2d"});break;case 4:t=S.default.createElement(p.default,{status:"default",text:"\u5df2\u5b8c\u6210"});break;default:break}return t}},{title:"\u5408\u540c\u5927\u7c7b",dataIndex:"bigcategory",key:"bigcategory",render:function(e){return"1"===e?S.default.createElement(s.default,{color:"green"},"\u6536\u5165"):S.default.createElement(s.default,{color:"magenta"},"\u652f\u51fa")}},{title:"\u4e1a\u52a1\u7c7b\u578b",dataIndex:"businesstype",key:"businesstype",render:function(e){var t="";switch(e){case"1":t="\u5408\u4f5c";break;case"2":t="\u519b\u5de5";break;case"3":t="\u5176\u4ed6";break;case"4":t="\u533b\u7597";break;case"5":t="\u667a\u80fd\u7a7f\u6234";break;default:break}return t}},{title:"\u64cd\u4f5c",render:function(e,t){return S.default.createElement(S.Fragment,null,S.default.createElement("a",{style:{whiteSpace:"nowrap"},onClick:function(){return a.handleEdit(t)}},t.contractstatus<3?"\u7f16\u8f91":S.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.65)"}},"\u67e5\u770b")),S.default.createElement(m.default,{type:"vertical"}),S.default.createElement("a",{style:{color:"red",whiteSpace:"nowrap"},onClick:function(){return a.handleRemoveModalVisible(!0,t)}},"\u5220\u9664"))}}],a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,n=a.state.formValues,d=Object.keys(t).reduce(function(e,a){var l=(0,i.default)({},e);return l[a]=T(t[a]),l},{}),u=(0,i.default)({currentPage:e.current,pageSize:e.pageSize},n,d);l.field&&(u.sorter="".concat(l.field,"_").concat(l.order)),r({type:"contractdata/getData",payload:u})},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;a.publicGetData(l,r)},a.handleRemoveModalVisible=function(e,t){a.setState({removeModalVisible:!!e,dataSource:t})},a.handleEdit=function(e){var t=a.props.dispatch;t(C.routerRedux.push({pathname:"/compact/contract-detail",query:{contractid:e.contractid}}))},a.handleAdd=function(){var e=a.props.dispatch;e(C.routerRedux.push({pathname:"/compact/contract-add"}))},a.handleRemove=function(e){var t={contractid:e},l=a.props,r=l.dispatch,n=l.form;r({type:"contractdata/removeData",payload:t}).then(function(e){e.statusCode?g.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):g.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:"\u5220\u9664\u6210\u529f\uff01",onOk:function(){a.setState({removeModalVisible:!1}),a.publicGetData(r,n)}})})},a.publicGetData=function(e,t){t.validateFields(function(t,l){if(!t){var r=l;r.statisticalmonth=l.statisticalmonth?(0,D.default)(l.statisticalmonth).format("YYYY-MM"):null;var n=(0,i.default)({},r,{updatedAt:r.updatedAt&&r.updatedAt.valueOf()});a.setState({formValues:n}),e({type:"contractdata/getData",payload:n})}})},a}return(0,y.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t={currentPage:1,pageSize:10};e({type:"contractdata/getData",payload:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return S.default.createElement(M.default,{onSubmit:this.handleSearch,layout:"inline"},S.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u540c\u7f16\u53f7"},e("contractno")(S.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u7f16\u53f7"})))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u4f5c\u65b9"},e("suppliername")(S.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u4f5c\u65b9"})))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement("span",{className:N.default.submitButtons},S.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),S.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),S.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",S.default.createElement(k.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator;return S.default.createElement(M.default,{onSubmit:this.handleSearch,layout:"inline"},S.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u540c\u7f16\u53f7"},e("contractno")(S.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u7f16\u53f7"})))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u540c\u540d\u79f0"},e("contractname")(S.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u540d\u79f0"})))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u4f5c\u65b9"},e("suppliername")(S.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u4f5c\u65b9"})))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u4e1a\u52a1\u7c7b\u578b"},e("businesstype",{initialValue:""})(S.default.createElement(w.default,null,S.default.createElement(P,{value:""},"\u8bf7\u9009\u62e9"),S.default.createElement(P,{value:"1"},"\u5408\u4f5c"),S.default.createElement(P,{value:"2"},"\u519b\u5de5"),S.default.createElement(P,{value:"3"},"\u5176\u4ed6"),S.default.createElement(P,{value:"4"},"\u533b\u7597"),S.default.createElement(P,{value:"5"},"\u667a\u80fd\u7a7f\u6234"))))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u540c\u5927\u7c7b"},e("bigcategory",{initialValue:""})(S.default.createElement(w.default,null,S.default.createElement(P,{value:""},"\u8bf7\u9009\u62e9"),S.default.createElement(P,{value:"1"},"\u6536\u5165"),S.default.createElement(P,{value:"2"},"\u652f\u51fa"))))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u5408\u540c\u5c0f\u7c7b"},e("smallcategory",{initialValue:""})(S.default.createElement(w.default,null,S.default.createElement(P,{value:""},"\u8bf7\u9009\u62e9"),S.default.createElement(P,{value:"1"},"\u91c7\u8d2d\u5408\u540c"),S.default.createElement(P,{value:"2"},"\u5de5\u7a0b\u5408\u540c"),S.default.createElement(P,{value:"3"},"\u5408\u4f5c\u534f\u8bae"),S.default.createElement(P,{value:"4"},"\u6280\u672f\u670d\u52a1\u5408\u540c"),S.default.createElement(P,{value:"5"},"\u79df\u8d41\u5408\u540c"))))),S.default.createElement(o.default,{md:8,sm:24},S.default.createElement(I,{label:"\u7edf\u8ba1\u6708\u4efd"},e("statisticalmonth")(S.default.createElement(z,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd",style:{width:"100%"}}))))),S.default.createElement("div",{style:{overflow:"hidden"}},S.default.createElement("div",{style:{float:"right",marginBottom:24}},S.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),S.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),S.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",S.default.createElement(k.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.contractdata.data,l=t.loading,r=this.state,u=r.removeModalVisible,o=r.dataSource,f={handleRemove:this.handleRemove,handleRemoveModalVisible:this.handleRemoveModalVisible,record:o};return S.default.createElement(R.default,{title:"\u6536\u652f\u5408\u540c"},S.default.createElement(d.default,{bordered:!1},S.default.createElement("div",{className:N.default.tableList},S.default.createElement("div",{className:N.default.tableListForm},this.renderForm()),S.default.createElement("div",{className:N.default.tableListOperator},S.default.createElement(c.default,{icon:"plus",type:"primary",onClick:function(){return e.handleAdd()}},"\u65b0\u5efa")),S.default.createElement(x.default,{loading:l,data:a,rowKey:"contractid",columns:this.columns,onChange:this.handleStandardTableChange}))),S.default.createElement(B,(0,n.default)({},f,{removeModalVisible:u})))}}]),t}(S.PureComponent))||O)||O),j=J;t.default=j}}]);