(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"r+cH":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a("pVnL"));a("IzEo");var n=l(a("bx4M"));a("14J3");var d=l(a("BMrR"));a("+L6B");var u=l(a("2/Rp"));a("jCWc");var c=l(a("kPKH"));a("5NDa");var i=l(a("5rEg")),s=l(a("MVZn"));a("/zsF");var f=l(a("PArb"));a("Awhp");var m=l(a("KrTs")),p=l(a("lwsE")),v=l(a("W8MJ")),h=l(a("a1gu")),E=l(a("Nsbk")),b=l(a("7W2i"));a("2qtc");var y=l(a("kLXV"));a("Pwec");var g=l(a("CtXQ"));a("OaEy");var k=l(a("2fM7"));a("y8nQ");var F,S,w,C=l(a("Vl3Y")),M=r(a("q1tI")),x=a("MuoO"),V=a("7DNP"),R=l(a("CkN6")),D=l(a("zHco")),A=l(a("wd/R")),O=l(a("A4CJ")),L=C.default.Item,N=k.default.Option,I=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},P=C.default.create()(function(e){var t=e.removeModalVisible,a=e.handleRemove,l=e.handleRemoveModalVisible,r=e.record,o=function(){a(r.protocolid)};return M.default.createElement(y.default,{destroyOnClose:!0,title:"\u5220\u9664\u5408\u540c",visible:t,maskClosable:!1,style:{paddingBottom:"200px"},onOk:o,onCancel:function(){return l("",r)}},M.default.createElement("div",{className:O.default.deleteIcon},M.default.createElement(g.default,{type:"delete",theme:"outlined"})),M.default.createElement("div",{className:O.default.deleteCont},"\u786e\u5b9a\u8981\u5220\u9664\u534f\u8bae\u7f16\u53f7\u4e3a\u3010",M.default.createElement("span",null,r.protocolno),"\u3011\u7684\u6570\u636e\u5417\uff1f"))}),T=(F=(0,x.connect)(function(e){var t=e.protocoldata,a=e.loading;return{protocoldata:t,loading:a.models.protocoldata}}),S=C.default.create(),F(w=S(w=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return a=(0,h.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(r))),a.state={expandForm:!1,removeModalVisible:!1,dataSource:{}},a.columns=[{title:"\u534f\u8bae\u7f16\u53f7",dataIndex:"protocolno",key:"protocolno"},{title:"\u534f\u8bae\u540d\u79f0",dataIndex:"protocolname",key:"protocolname"},{title:"\u4e1a\u52a1\u7c7b\u578b",dataIndex:"businesstype",key:"businesstype",render:function(e){var t="";switch(e){case"1":t="\u5408\u4f5c";break;case"2":t="\u519b\u5de5";break;case"3":t="\u5176\u4ed6";break;case"4":t="\u533b\u7597";break;case"5":t="\u667a\u80fd\u7a7f\u6234";break;default:break}return t}},{title:"\u6d41\u7a0b\u72b6\u6001",dataIndex:"protocolstatus",key:"protocolstatus",render:function(e){var t;switch(e){case 1:t=M.default.createElement(m.default,{status:"warning",text:"\u5f85\u76d6\u7ae0"});break;case 2:t=M.default.createElement(m.default,{status:"success",text:"\u5f85\u5f52\u6863"});break;case 3:t=M.default.createElement(m.default,{status:"processing",text:"\u6267\u884c\u4e2d"});break;case 4:t=M.default.createElement(m.default,{status:"default",text:"\u5df2\u5b8c\u6210"});break;default:break}return t}},{title:"\u7b7e\u7ea6\u65e5\u671f",dataIndex:"protocoldate",key:"protocoldate",render:function(e){return M.default.createElement("span",null,e?(0,A.default)(e).format("YYYY-MM-DD"):"")}},{title:"\u64cd\u4f5c",render:function(e,t){return M.default.createElement(M.Fragment,null,M.default.createElement("a",{style:{whiteSpace:"nowrap"},onClick:function(){return a.handleEdit(t)}},t.protocolstatus<3?"\u7f16\u8f91":M.default.createElement("span",{style:{color:"rgba(0, 0, 0, 0.65)"}},"\u67e5\u770b")),M.default.createElement(f.default,{type:"vertical"}),M.default.createElement("a",{style:{color:"red",whiteSpace:"nowrap"},onClick:function(){return a.handleRemoveModalVisible(!0,t)}},"\u5220\u9664"))}}],a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,o=a.state.formValues,n=Object.keys(t).reduce(function(e,a){var l=(0,s.default)({},e);return l[a]=I(t[a]),l},{}),d=(0,s.default)({currentPage:e.current,pageSize:e.pageSize},o,n);l.field&&(d.sorter="".concat(l.field,"_").concat(l.order)),r({type:"protocoldata/getData",payload:d})},a.publicGetData=function(e,t){t.validateFields(function(t,l){if(!t){var r=l,o=(0,s.default)({},r,{updatedAt:r.updatedAt&&r.updatedAt.valueOf()});a.setState({formValues:o}),e({type:"protocoldata/getData",payload:o})}})},a.handleFormReset=function(){var e=a.props,t=e.form;e.dispatch;t.resetFields(),a.setState({formValues:{}})},a.jumpToAdd=function(){var e=a.props.dispatch;e(V.routerRedux.push({pathname:"/compact/protocol-detail"}))},a.handleEdit=function(e){var t=a.props.dispatch;t(V.routerRedux.push({pathname:"/compact/protocol-detail",query:{protocolid:e.protocolid}}))},a.handleRemoveModalVisible=function(e,t){a.setState({removeModalVisible:!!e,dataSource:t})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;a.publicGetData(l,r)},a.handleRemove=function(e){var t={protocolid:e},l=a.props,r=l.dispatch,o=l.form;r({type:"protocoldata/removeData",payload:t}).then(function(e){e.statusCode?y.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):y.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:"\u5220\u9664\u6210\u529f\uff01",onOk:function(){a.setState({removeModalVisible:!1}),a.publicGetData(r,o)}})})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t={currentPage:1,pageSize:10};e({type:"protocoldata/getData",payload:t})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return M.default.createElement(C.default,{onSubmit:this.handleSearch,layout:"inline"},M.default.createElement(d.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(c.default,{md:8,sm:24},M.default.createElement(L,{label:"\u534f\u8bae\u7f16\u53f7"},e("protocolno")(M.default.createElement(i.default,{placeholder:"\u8bf7\u8f93\u5165\u534f\u8bae\u7f16\u53f7"})))),M.default.createElement(c.default,{md:8,sm:24},M.default.createElement(L,{label:"\u534f\u8bae\u540d\u79f0"},e("protocolname")(M.default.createElement(i.default,{placeholder:"\u8bf7\u8f93\u5165\u534f\u8bae\u540d\u79f0"})))),M.default.createElement(c.default,{md:8,sm:24},M.default.createElement("span",{className:O.default.submitButtons},M.default.createElement(u.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),M.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",M.default.createElement(g.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator;return M.default.createElement(C.default,{onSubmit:this.handleSearch,layout:"inline"},M.default.createElement(d.default,{gutter:{md:8,lg:24,xl:48}},M.default.createElement(c.default,{md:8,sm:24},M.default.createElement(L,{label:"\u534f\u8bae\u7f16\u53f7"},e("protocolno")(M.default.createElement(i.default,{placeholder:"\u8bf7\u8f93\u5165\u534f\u8bae\u7f16\u53f7"})))),M.default.createElement(c.default,{md:8,sm:24},M.default.createElement(L,{label:"\u534f\u8bae\u540d\u79f0"},e("protocolname")(M.default.createElement(i.default,{placeholder:"\u8bf7\u8f93\u5165\u534f\u8bae\u540d\u79f0"})))),M.default.createElement(c.default,{md:8,sm:24},M.default.createElement(L,{label:"\u4e1a\u52a1\u7c7b\u578b"},e("areaversion",{initialValue:""})(M.default.createElement(k.default,null,M.default.createElement(N,{value:""},"\u8bf7\u9009\u62e9"),M.default.createElement(N,{value:"1"},"\u5408\u4f5c"),M.default.createElement(N,{value:"2"},"\u519b\u5de5"),M.default.createElement(N,{value:"3"},"\u5176\u4ed6"),M.default.createElement(N,{value:"4"},"\u533b\u7597"),M.default.createElement(N,{value:"5"},"\u667a\u80fd\u7a7f\u6234")))))),M.default.createElement("div",{style:{overflow:"hidden"}},M.default.createElement("div",{style:{float:"right",marginBottom:24}},M.default.createElement(u.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),M.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),M.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",M.default.createElement(g.default,{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.protocoldata.data,l=t.loading,r=this.state,d=r.removeModalVisible,c=r.dataSource,i={removeModalVisible:d,record:c},s={handleRemove:this.handleRemove,handleRemoveModalVisible:this.handleRemoveModalVisible};return M.default.createElement(D.default,{title:"\u5408\u4f5c\u534f\u8bae\u6570\u636e"},M.default.createElement(n.default,{bordered:!1},M.default.createElement("div",{className:O.default.tableList},M.default.createElement("div",{className:O.default.tableListForm},this.renderForm()),M.default.createElement("div",{className:O.default.tableListOperator},M.default.createElement(u.default,{icon:"plus",type:"primary",onClick:function(){return e.jumpToAdd()}},"\u65b0\u5efa")),M.default.createElement(R.default,{loading:l,data:a,rowKey:"protocolid",columns:this.columns,onChange:this.handleStandardTableChange}))),M.default.createElement(P,(0,o.default)({},s,i)))}}]),t}(M.PureComponent))||w)||w),j=T;t.default=j}}]);