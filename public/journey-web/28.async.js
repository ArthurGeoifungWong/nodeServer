(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{qswh:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("/zsF");var u=l(a("PArb"));a("T2oS");var d=l(a("W9HT"));a("14J3");var o=l(a("BMrR"));a("5Dmo");var c=l(a("3S7+"));a("+L6B");var f=l(a("2/Rp"));a("+BJd");var i=l(a("mr32"));a("7Kak");var s=l(a("9yH6"));a("jCWc");var m=l(a("kPKH")),p=l(a("pVnL"));a("5NDa");var h=l(a("5rEg"));a("2qtc");var y=l(a("kLXV")),E=l(a("lwsE")),g=l(a("W8MJ")),v=l(a("a1gu")),C=l(a("Nsbk")),S=l(a("7W2i"));a("y8nQ");var k=l(a("Vl3Y")),b=n(a("q1tI")),w=a("MuoO"),M=l(a("usdK")),N=l(a("wd/R"));a("XDpg");var x,D,R,q=l(a("IkuO")),I=l(a("mNfy")),T=l(a("sZhH")),F=k.default.Item,J=(x=(0,w.connect)(function(e){var t=e.monthly,a=e.modelutil;return{monthly:t,modelutil:a}}),D=k.default.create(),x(R=D(R=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,v.default)(this,(e=(0,C.default)(t)).call.apply(e,[this].concat(n))),a.state={loading:!1,selectType:"1",showSelectModal:!1,linkContarct:""},a.componentDidMount=function(){a.getModelNum()},a.btnCurrent=function(){var e=a.state.linkContarct,t=a.props,l=t.dispatch,n=t.form,r=n.validateFields;r(function(t,n){var r=n;r.relatedcontractname=e,t||(a.setState({loading:!0}),l({type:"monthly/addData",payload:r}).then(function(e){e.statusCode?y.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):-1===e.code?y.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.msg,"\u8bf7\u70b9\u51fb\u786e\u5b9a\u6309\u94ae\u91cd\u65b0\u83b7\u53d6\u5408\u540c\u7f16\u53f7\u3002"),okText:"\u786e\u5b9a",onOk:function(){return a.getModelNum()}}):M.default.push({pathname:"/compact/monthlystatement-add/confirm",query:{paymentid:e.data}}),a.setState({loading:!1})}))})},a.openSelectContratc=function(e,t){var l=a.state.linkContarct;a.setState({showSelectModal:!!e}),t?(a.setState({linkContarct:t.join("\uff0c")}),a.selectData(t)):(a.child.getCon(),a.child.setState({condata:""===l?[]:l.split("\uff0c")}))},a.getModelNum=function(){var e=a.props,t=e.dispatch,l=e.form;a.setState({loading:!0}),t({type:"modelutil/getConNum",payload:{}}).then(function(e){if(e.statusCode)y.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)});else{var t=(0,N.default)().format("YYYYMMDD"),n="";n="1"===l.getFieldValue("paymenttype")?"GCI-11-JSR-".concat(t,"-").concat(e.data):"GCI-11-JZC-".concat(t,"-").concat(e.data),l.setFieldsValue({paymentno:n})}a.setState({loading:!1})})},a.selectData=function(e){a.setState({linkContarct:e.join("\uff0c")})},a.onSelectRef=function(e){a.child=e},a}return(0,S.default)(t,e),(0,g.default)(t,[{key:"render",value:function(){var e=this,t=this.props.form,a=this.state,l=a.loading,n=a.selectType,y=a.linkContarct,E=a.showSelectModal,g=t.getFieldDecorator,v={md:12,sm:24},C={labelCol:{span:7},wrapperCol:{span:13}},S={showModal:E,linkContarct:y},w={openSelectContratc:this.openSelectContratc,onSelectRef:this.onSelectRef},M=function(){e.getModelNum()};return b.default.createElement(b.Fragment,null,b.default.createElement(r.default,{style:{marginTop:"24px"},bordered:!1,className:T.default.retCard},b.default.createElement(d.default,{spinning:l},b.default.createElement(k.default,{layout:"inline",className:I.default.addForm},b.default.createElement(o.default,null,b.default.createElement(m.default,v,b.default.createElement(F,(0,p.default)({label:"\u7ed3\u7b97\u5355\u7f16\u53f7"},C),g("paymentno",{rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(b.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u7ed3\u7b97\u5355\u7f16\u53f7",disabled:!0,style:{color:"rgba(0,0,0,1)"}})))),b.default.createElement(m.default,v,b.default.createElement(F,(0,p.default)({label:"\u7ed3\u7b97\u5185\u5bb9"},C),g("settlementcontent",{rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(b.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u7ed3\u7b97\u5185\u5bb9"})))),b.default.createElement(m.default,v,b.default.createElement(k.default.Item,(0,p.default)({},C,{label:"1"===n?"\u5408\u4f5c\u65b9":"\u6536\u6b3e\u5355\u4f4d"}),g("receivablecompany",{rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(b.default.createElement(h.default,{placeholder:"1"===n?"\u8f93\u5165\u5408\u4f5c\u65b9":"\u8f93\u5165\u6536\u6b3e\u5355\u4f4d"})))),b.default.createElement(m.default,v,b.default.createElement(F,(0,p.default)({label:"\u8ba2\u5355\u7c7b\u578b"},C),g("paymenttype",{initialValue:"1"})(b.default.createElement(s.default.Group,{onChange:function(){return M()},style:{whiteSpace:"nowrap"}},b.default.createElement(s.default,{value:"1"},"\u6536\u6b3e"),b.default.createElement(s.default,{value:"2"},"\u4ed8\u6b3e"))))),b.default.createElement(m.default,{className:I.default.lineTextarea},b.default.createElement(F,{label:"\u5173\u8054\u5408\u540c"},""===y?"":y.split("\uff0c").map(function(e){return b.default.createElement(i.default,{color:"#108ee9",key:e},e)}),b.default.createElement(c.default,{placement:"topLeft",title:"\u70b9\u51fb\u9009\u62e9\u5173\u8054\u5408\u540c",arrowPointAtCenter:!0},b.default.createElement(f.default,{title:"\u9009\u62e9",onClick:function(){return e.openSelectContratc(!0)},size:"small",style:{marginRight:"10px",padding:"0px 20px"}},"\uff0b")),b.default.createElement("span",null,"\u5df2\u9009\u62e9:")," ",b.default.createElement("span",null,b.default.createElement("b",null,""===y?0:y.split("\uff0c").length)," \u4e2a")))),b.default.createElement(k.default.Item,{style:{textAlign:"center"}},b.default.createElement("div",null,b.default.createElement(f.default,{type:"primary",onClick:function(){return e.btnCurrent()}},"\u4e0b\u4e00\u6b65"))))),b.default.createElement(q.default,(0,p.default)({},S,w)),b.default.createElement(u.default,{style:{margin:"40px 0 24px"}})))}}]),t}(b.default.PureComponent))||R)||R),V=J;t.default=V}}]);