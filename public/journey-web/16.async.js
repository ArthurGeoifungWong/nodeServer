(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{Peit:function(e,t,a){"use strict";var l=a("284h"),n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r=n(a("wCAj"));a("FJo9");var d=n(a("L41K"));a("y8nQ");var c=n(a("Vl3Y")),u=l(a("q1tI")),i=n(a("wd/R"));a("XDpg");var o=a("4ZfN"),f=(a("AvXd"),n(a("A4CJ")));n(a("mDQx")),n(a("mNfy"));i.default.locale("zh-cn");c.default.Item,d.default.Step;var s=function(e){var t=e.titleArr,a=e.recivePaymentPlanData,l=e.recivePlanLoading,n=(e.showRecivePlanModal,e.handleRemoveRecivePlan,function(e,t,l){var n={children:e,props:{}};return l===a.length&&(n.props.colSpan=0),n}),d=[0,0],c=[];if(a.length){var s=0,m=0;a.forEach(function(e){s+=Number(e.money),m+=Number(e.moneypercent)}),m=m.toFixed(2),d[0]=s,d[1]=m,c=a.concat({itemIndex:"\u603b\u8ba1",receivablesplanid:"total",money:s,moneypercent:m})}var p=[{title:"\u5e8f\u53f7",dataIndex:"itemIndex",key:"itemIndex",render:function(e,t,l){return l===a.length?{children:u.default.createElement("span",{style:{fontWeight:600}},"\u603b\u8ba1"),props:{colSpan:1}}:l+1}},{title:"\u91d1\u989d",dataIndex:"money",key:"money",render:function(e){return n((0,o.filterRMB)(e,"formatter"))}},{title:"\u6bd4\u7387",dataIndex:"moneypercent",key:"moneypercent",render:function(e){return n("".concat(e,"%"))}},{title:"".concat(t[1],"\u65e5\u671f"),dataIndex:"receivablesplandate",key:"receivablesplandate",render:function(e){return n(e?(0,i.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatetime",key:"updatetime",render:function(e){return n(e?(0,i.default)(e).format("YYYY-MM-DD"):null)}}];return u.default.createElement("div",null,u.default.createElement("h3",{className:f.default.inputBlockTitle},"\u8ba1\u5212",t[1],"\u60c5\u51b5"),u.default.createElement("div",{style:{marginTop:"16px"}},u.default.createElement(r.default,{loading:l,pagination:!1,rowKey:"receivablesplanid",dataSource:c,columns:p,style:{marginTop:"16px"}})))},m=s;t.default=m},eW25:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("miYZ");var d=l(a("tsqr")),c=l(a("lwsE")),u=l(a("W8MJ")),i=l(a("a1gu")),o=l(a("Nsbk")),f=l(a("7W2i"));a("Pwec");var s=l(a("CtXQ"));a("T2oS");var m=l(a("W9HT"));a("2qtc");var p=l(a("kLXV"));a("g9YV");var v=l(a("wCAj"));a("giR+");var E=l(a("fyUT"));a("14J3");var g=l(a("BMrR"));a("5Dmo");var h=l(a("3S7+"));a("+BJd");var y=l(a("mr32")),b=l(a("pVnL"));a("jCWc");var M=l(a("kPKH"));a("+L6B");var w=l(a("2/Rp"));a("/zsF");var k=l(a("PArb"));a("FJo9");var R=l(a("L41K"));a("iQDF");var S=l(a("+eQT"));a("5NDa");var C=l(a("5rEg"));a("OaEy");var x=l(a("2fM7"));a("y8nQ");var L=l(a("Vl3Y")),D=n(a("q1tI")),P=a("MuoO"),Y=a("7DNP"),F=l(a("zHco")),N=l(a("KGTK")),T=l(a("IkuO")),B=a("Ig5U"),I=a("4ZfN"),A=l(a("wd/R")),O=l(a("mr0z"));a("XDpg");var V,q,J=l(a("mNfy")),G=l(a("mDQx"));A.default.locale("zh-cn");var K=L.default.Item,z=x.default.Option,j=C.default.TextArea,W=S.default.RangePicker,Q=S.default.MonthPicker,H=R.default.Step,X=L.default.create()(function(e){var t=e.form.getFieldDecorator,a=e.currentSave,l=e.linkContarct,n=e.showStampModal,r=e.showPlaceFileModel,d=e.titleArr,c=e.recivePlanLoading,u=e.recivePaymentPlanData,i=e.showRecivePlanModal,o=e.handleRemoveRecivePlan,f=e.showFinishModel,s={md:12,sm:24},m={labelCol:{span:7},wrapperCol:{span:13}},p=function(e,t,a){var l={children:e,props:{}};return a===u.length&&(l.props.colSpan=0),l},P=[0,0],Y=[];if(u.length){var F=0,N=0;u.forEach(function(e){F+=Number(e.money),N+=Number(e.moneypercent)}),N=N.toFixed(2),P[0]=F,P[1]=N,Y=u.concat({itemIndex:"\u603b\u8ba1",receivablesplanid:"total",money:F,moneypercent:N})}var T=[{title:"\u5e8f\u53f7",dataIndex:"itemIndex",key:"itemIndex",render:function(e,t,a){return a===u.length?{children:D.default.createElement("span",{style:{fontWeight:600}},"\u603b\u8ba1"),props:{colSpan:1}}:a+1}},{title:"\u91d1\u989d",dataIndex:"money",key:"money",render:function(e){return p((0,I.filterRMB)(e,"formatter"))}},{title:"\u6bd4\u7387",dataIndex:"moneypercent",key:"moneypercent",render:function(e){return p("".concat(e,"%"))}},{title:"".concat(d[1],"\u65e5\u671f"),dataIndex:"receivablesplandate",key:"receivablesplandate",render:function(e){return p(e?(0,A.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatetime",key:"updatetime",render:function(e){return p(e?(0,A.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u64cd\u4f5c",render:function(e,t,a){return a<u.length&&D.default.createElement(D.Fragment,null,D.default.createElement("a",{style:{whiteSpace:"nowrap"},onClick:function(){return i(t)}},"\u7f16\u8f91"),D.default.createElement(k.default,{type:"vertical"}),D.default.createElement("a",{style:{color:"red",whiteSpace:"nowrap"},onClick:function(){return o(a,t)}},"\u5220\u9664"))}}],O=function(e,t){var a=[];return a[0]=(0,A.default)(e),a[1]=(0,A.default)(t),a},V=function(e){var t="";switch(e){case 1:t=D.default.createElement(w.default,{type:"primary",className:J.default.listDataBtn,title:"\u76d6\u7ae0",icon:"caret-right",onClick:function(){return n()}},"\u7528\u5370");break;case 2:t=D.default.createElement(w.default,{type:"primary",className:J.default.listDataBtn,title:"\u5f52\u6863",icon:"caret-right",onClick:function(){return r()}},"\u5f52\u6863");break;case 3:t=D.default.createElement(w.default,{type:"primary",className:J.default.listDataBtn,title:"\u5b8c\u6210",icon:"caret-right",onClick:function(){return f()}},"\u5b8c\u6210");break;default:break}return t},q=function(e){var t="";switch(e){case"1":t="\u4e8c\u7ef4\u7801";break;case"2":t="\u4e0d\u4f7f\u7528\u4e8c\u7ef4\u7801";break;case"3":t="\u7eb8\u8d28";break;default:break}return t};return D.default.createElement(L.default,{layout:"inline",className:J.default.addForm},D.default.createElement("h3",{className:J.default.inputBlockTitle},"\u6d41\u7a0b\u72b6\u6001"),D.default.createElement(R.default,{style:{margin:"24px 0px",padding:"0px 24px"},current:e.contractstatus-1},D.default.createElement(H,{title:"\u5f85\u76d6\u7ae0",description:"\u521b\u5efa\u5b8c\u6210\uff0c\u7b49\u5f85\u76d6\u7ae0"}),D.default.createElement(H,{title:"\u5f85\u5f52\u6863",description:"\u5df2\u76d6\u7ae0\uff0c\u7b49\u5f85\u5f52\u6863"}),D.default.createElement(H,{title:"\u6267\u884c\u4e2d",description:"\u8be5\u5408\u540c\u6b63\u5728\u6267\u884c"}),D.default.createElement(H,{title:"\u5df2\u5b8c\u6210",description:"\u8be5\u5408\u540c\u5df2\u7ecf\u5b8c\u6210"})),D.default.createElement("h3",{className:J.default.inputBlockTitle},"\u5408\u540c\u6982\u51b5"),D.default.createElement(g.default,null,D.default.createElement(M.default,{className:J.default.lineTextarea},D.default.createElement(K,{label:"\u5408\u540c\u540d\u79f0"},t("contractname",{initialValue:e.contractname,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u540d\u79f0"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u5408\u540c\u7f16\u53f7"},m),t("contractno",{initialValue:e.contractno,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u7f16\u53f7",disabled:!0,style:{color:"rgba(0,0,0,1)"}})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u4e1a\u52a1\u7c7b\u578b"},m),t("businesstype",{initialValue:e.businesstype,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(x.default,null,D.default.createElement(z,{value:""},"\u8bf7\u9009\u62e9"),D.default.createElement(z,{value:"1"},"\u5408\u4f5c"),D.default.createElement(z,{value:"2"},"\u519b\u5de5"),D.default.createElement(z,{value:"3"},"\u5176\u4ed6"),D.default.createElement(z,{value:"4"},"\u533b\u7597"),D.default.createElement(z,{value:"5"},"\u667a\u80fd\u7a7f\u6234"))))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({className:J.default.spRequired,label:"\u5408\u540c\u5927\u7c7b"},m),D.default.createElement("div",null,"1"===e.bigcategory?"\u6536\u5165\u5408\u540c":"\u652f\u51fa\u5408\u540c"))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u5408\u540c\u5c0f\u7c7b"},m),t("smallcategory",{initialValue:e.smallcategory,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(x.default,null,D.default.createElement(z,{value:""},"\u8bf7\u9009\u62e9"),D.default.createElement(z,{value:"1"},"\u91c7\u8d2d\u5408\u540c"),D.default.createElement(z,{value:"2"},"\u5de5\u7a0b\u5408\u540c"),D.default.createElement(z,{value:"3"},"\u5408\u4f5c\u534f\u8bae"),D.default.createElement(z,{value:"4"},"\u6280\u672f\u670d\u52a1\u5408\u540c"),D.default.createElement(z,{value:"5"},"\u79df\u8d41\u5408\u540c"))))),D.default.createElement(M.default,{className:J.default.lineTextarea},D.default.createElement(K,{label:"\u5408\u4f5c\u65b9"},t("suppliername",{initialValue:e.suppliername,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u4f5c\u65b9"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u5408\u4f5c\u65b9\u8d1f\u8d23\u4eba"},m),t("supplierresponsibleperson",{initialValue:e.supplierresponsibleperson,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u5408\u4f5c\u65b9\u8d1f\u8d23\u4eba"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u8054\u7cfb\u7535\u8bdd"},m),t("suppliertelephone",{initialValue:e.suppliertelephone,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u8d23\u4efb\u90e8\u95e8"},m),t("responsibledepartment",{initialValue:e.responsibledepartment,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u8d23\u4efb\u90e8\u95e8"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u7ecf\u529e\u4eba"},m),t("responsibleperson",{initialValue:e.responsibleperson,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u7ecf\u529e\u4eba"})))),"1"===e.bigcategory?"":D.default.createElement(M.default,{className:J.default.lineTextarea},D.default.createElement(K,{label:"\u5408\u540c\u5173\u8054\u60c5\u51b5",className:"".concat(J.default.linkContarct," ").concat(J.default.spRequired)},""===l?"":l.split("\uff0c").map(function(e){return D.default.createElement(y.default,{color:"#108ee9",key:e},e)}),D.default.createElement(h.default,{placement:"topLeft",title:"\u70b9\u51fb\u9009\u62e9\u5173\u8054\u5408\u540c",arrowPointAtCenter:!0},D.default.createElement(w.default,{title:"\u9009\u62e9",onClick:function(){return e.openSelectContratc(!0)},size:"small",style:{marginRight:"10px",padding:"0px 20px"}},"\uff0b")),D.default.createElement("span",null,"\u5df2\u9009\u62e9:")," ",D.default.createElement("span",null,D.default.createElement("b",null,""===l?0:l.split("\uff0c").length)," \u4e2a")))),D.default.createElement("h3",{className:J.default.inputBlockTitle},"\u5408\u540c\u6761\u6b3e"),D.default.createElement(g.default,null,D.default.createElement(M.default,{className:J.default.lineTextarea},D.default.createElement(K,{label:"\u5408\u540c\u6807\u7684"},t("contractcontent",{initialValue:e.contractcontent})(D.default.createElement(j,{placeholder:"\u8bf7\u8f93\u5165\u5408\u540c\u6807\u7684"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u6570\u91cf"},m),t("measurementnumber",{initialValue:e.measurementnumber})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u8ba1\u91cf\u5355\u4f4d"},m),t("measurementunit",{initialValue:e.measurementunit})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u8ba1\u91cf\u5355\u4f4d"})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u5355\u4ef7"},m),t("unitprice",{initialValue:e.unitprice})(D.default.createElement(E.default,{style:{width:"100%"},step:100,min:0,formatter:function(e){return(0,I.filterRMB)(e,"formatter")},parser:function(e){return(0,I.filterRMB)(e,"parser")}})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u603b\u6570\u989d"},m),t("totalprice",{initialValue:e.totalprice,rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"},{validator:B.validateToTotalPrice}]})(D.default.createElement(E.default,{style:{width:"100%"},step:100,min:0,formatter:function(e){return(0,I.filterRMB)(e,"formatter")},parser:function(e){return(0,I.filterRMB)(e,"parser")}})))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u7b7e\u7ea6\u65e5\u671f"},m),t("signingdateLong",{initialValue:e.signingdateLong?(0,A.default)(e.signingdateLong):null})(D.default.createElement(S.default,null)))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u5f00\u59cb\u4e0e\u7ed3\u675f\u65e5\u671f"},m),t("startEndRange",{initialValue:e.begindateLong&&e.enddateLong?O(e.begindateLong,e.enddateLong):null})(D.default.createElement(W,null)))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u521b\u5efa\u65f6\u95f4"},m),D.default.createElement("div",null,(0,A.default)(e.createtime).format("YYYY-MM-DD HH:mm:ss")))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u66f4\u65b0\u65f6\u95f4"},m),D.default.createElement("div",null,(0,A.default)(e.updatetime).format("YYYY-MM-DD HH:mm:ss"))))),1===e.contractstatus?"":D.default.createElement("div",{className:G.default.showParams},D.default.createElement("h3",{className:J.default.inputBlockTitle},"\u7528\u5370\u5ba1\u6279"),D.default.createElement(g.default,null,D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u7528\u5370\u65e5\u671f"},m),D.default.createElement("div",null,e.usesealdate?(0,A.default)(e.usesealdate).format("YYYY-MM-DD"):null))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u7528\u5370\u4eba"},m),D.default.createElement("div",null,e.usesealperson))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u5ba1\u6279\u65b9\u5f0f"},m),D.default.createElement("div",null,q(e.auditingsealtype)))),D.default.createElement(M.default,s,D.default.createElement(K,(0,b.default)({label:"\u4efd\u6570"},m),D.default.createElement("div",null,e.sealnumber))))),D.default.createElement("h3",{className:J.default.inputBlockTitle},"\u8ba1\u5212",d[1],"\u60c5\u51b5"),D.default.createElement("div",{style:{marginTop:"16px"}},D.default.createElement(w.default,{icon:"plus",type:"primary",onClick:function(){return i()}},"\u65b0\u589e\u8ba1\u5212",d[1]),D.default.createElement(v.default,{loading:c,pagination:!1,rowKey:"receivablesplanid",dataSource:Y,columns:T,style:{marginTop:"16px"}})),D.default.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},3===e.contractstatus||4===e.contractstatus?"":D.default.createElement(w.default,{className:J.default.listDataBtn,type:"primary",icon:"check",title:"\u4fdd\u5b58",onClick:function(){return a(e)}},"\u4fdd\u5b58\u57fa\u672c\u4fe1\u606f"),V(e.contractstatus)))}),_=L.default.create()(function(e){var t=e.form,a=e.stampModal,l=e.handleAddStamp,n=e.showStampModal,r={labelCol:{span:7},wrapperCol:{span:13}};return D.default.createElement(p.default,{destroyOnClose:!0,title:"\u7528\u5370\u5ba1\u6279",visible:a,maskClosable:!1,style:{paddingBottom:"200px"},onOk:function(){return l(e)},onCancel:function(){return n()}},D.default.createElement(L.default,{layout:"inline",className:J.default.addForm},D.default.createElement(K,(0,b.default)({label:"\u7528\u5370\u65e5\u671f"},r),t.getFieldDecorator("usesealdateLong",{initialValue:e.usesealdateLong?(0,A.default)(e.usesealdateLong):null})(D.default.createElement(S.default,null))),D.default.createElement(K,(0,b.default)({label:"\u7528\u5370\u4eba"},r),t.getFieldDecorator("usesealperson",{initialValue:e.usesealperson})(D.default.createElement(C.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u5370\u4eba"}))),D.default.createElement(K,(0,b.default)({label:"\u5ba1\u6279\u65b9\u5f0f"},r),t.getFieldDecorator("auditingsealtype",{initialValue:e.auditingsealtype?e.auditingsealtype:""})(D.default.createElement(x.default,null,D.default.createElement(z,{value:""},"\u8bf7\u9009\u62e9"),D.default.createElement(z,{value:"1"},"\u4e8c\u7ef4\u7801"),D.default.createElement(z,{value:"2"},"\u4e0d\u4f7f\u7528\u4e8c\u7ef4\u7801"),D.default.createElement(z,{value:"3"},"\u7eb8\u8d28")))),D.default.createElement(K,(0,b.default)({label:"\u4efd\u6570"},r),t.getFieldDecorator("sealnumber",{initialValue:e.sealnumber})(D.default.createElement(E.default,{min:0,style:{width:"100%"}})))))}),Z=L.default.create()(function(e){var t=e.form,a=e.recivePlanModal,l=e.handleAddRecivePlan,n=e.itemRecord,r=e.titleArr,d=e.showRecivePlanModal,c={labelCol:{span:7},wrapperCol:{span:13}},u="{}"===JSON.stringify(n)?"\u65b0\u5efa".concat(r[0]):"\u7f16\u8f91".concat(r[0]),i="{}"===JSON.stringify(n)?"insert":"update";return D.default.createElement(p.default,{destroyOnClose:!0,title:u,visible:a,maskClosable:!1,style:{paddingBottom:"200px"},onOk:function(){return l(e,i,n.receivablesplanid)},onCancel:function(){return d()}},D.default.createElement(L.default,{layout:"inline",className:J.default.addForm},D.default.createElement(K,(0,b.default)({label:"\u91d1\u989d"},c),t.getFieldDecorator("money",{initialValue:n.money?n.money:0,rules:[{required:!0,message:"\u6b64\u9879\u5fc5\u586b\uff01"}]})(D.default.createElement(E.default,{style:{width:"100%"},step:100,min:0,formatter:function(e){return(0,I.filterRMB)(e,"formatter")},parser:function(e){return(0,I.filterRMB)(e,"parser")}}))),D.default.createElement(K,(0,b.default)({label:"".concat(r[1],"\u65e5\u671f")},c),t.getFieldDecorator("receivablesplandateLong",{initialValue:n.receivablesplandateLong?(0,A.default)(n.receivablesplandateLong):null,rules:[{required:!0,message:"\u6b64\u9879\u5fc5\u586b\uff01"}]})(D.default.createElement(S.default,null)))))}),U=L.default.create()(function(e){var t=e.form,a=e.drawModal,l=e.showDrawModal,n=e.itemRecord,r=e.handleAddDraw,d=e.drawModalLoading,c=e.titleArr,u=e.drawNot,i={labelCol:{span:7},wrapperCol:{span:13}},o="{}"===JSON.stringify(n)?"\u65b0\u5efa".concat(c[0]):"\u7f16\u8f91".concat(c[0]),f="{}"===JSON.stringify(n)?"insert":"update";return D.default.createElement(p.default,{destroyOnClose:!0,title:o,visible:a,maskClosable:!1,style:{paddingBottom:"200px"},onOk:function(){return r(e,f,n.drawid)},onCancel:function(){return l(!1,{})}},D.default.createElement(m.default,{spinning:d},D.default.createElement(L.default,{layout:"inline",className:J.default.addForm},D.default.createElement(K,(0,b.default)({label:"\u672a".concat(c[0],"\u91d1\u989d")},i),D.default.createElement("div",null,(0,I.filterRMB)(u[0],"formatter"))),D.default.createElement(K,(0,b.default)({label:"\u91d1\u989d"},i),t.getFieldDecorator("money",{initialValue:n.money?n.money:0,rules:[{required:!0,message:"\u6b64\u9879\u5fc5\u586b\uff01"}]})(D.default.createElement(E.default,{style:{width:"100%"},step:100,min:0,formatter:function(e){return(0,I.filterRMB)(e,"formatter")},parser:function(e){return(0,I.filterRMB)(e,"parser")}}))),D.default.createElement(K,(0,b.default)({label:"".concat(c[0],"\u65e5\u671f")},i),t.getFieldDecorator("drawdateLong",{initialValue:n.drawdateLong?(0,A.default)(n.drawdateLong):null,rules:[{required:!0,message:"\u6b64\u9879\u5fc5\u586b\uff01"}]})(D.default.createElement(S.default,null))),D.default.createElement(K,(0,b.default)({label:"\u5f00\u7968\u7c7b\u578b"},i),t.getFieldDecorator("billingtype",{initialValue:n.billingtype?"".concat(n.billingtype):"",rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(x.default,null,D.default.createElement(z,{value:""},"\u8bf7\u9009\u62e9"),D.default.createElement(z,{value:"1"},"\u6280\u672f\u670d\u52a1"),D.default.createElement(z,{value:"2"},"\u4ea7\u54c1\u9500\u552e"),D.default.createElement(z,{value:"3"},"\u5de5\u7a0b\u65bd\u5de5")))),D.default.createElement(K,(0,b.default)({label:"\u7a0e\u7387"},i),t.getFieldDecorator("taxrate",{initialValue:n.taxrate?"".concat(n.taxrate):"",rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(x.default,null,D.default.createElement(z,{value:""},"\u8bf7\u9009\u62e9"),D.default.createElement(z,{value:"1"},"0%"),D.default.createElement(z,{value:"3"},"3%"),D.default.createElement(z,{value:"6"},"6%"),D.default.createElement(z,{value:"10"},"10%"),D.default.createElement(z,{value:"16"},"16%")))),D.default.createElement(K,(0,b.default)({label:"\u5907\u6ce8"},i),t.getFieldDecorator("remark",{initialValue:e.remark})(D.default.createElement(j,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))))}),$=L.default.create()(function(e){var t=e.form,a=e.reciveModal,l=e.showReciveModal,n=e.itemRecord,r=e.handleAddRecive,d=e.reciveModalLoading,c=e.titleArr,u=e.reciveNot,i={labelCol:{span:7},wrapperCol:{span:13}},o="{}"===JSON.stringify(n)?"\u65b0\u5efa".concat(c[1]):"\u7f16\u8f91".concat(c[1]),f="{}"===JSON.stringify(n)?"insert":"update";return D.default.createElement(p.default,{destroyOnClose:!0,title:o,visible:a,maskClosable:!1,style:{paddingBottom:"200px"},onOk:function(){return r(e,f,n.receivablesid)},onCancel:function(){return l(!1,{})}},D.default.createElement(m.default,{spinning:d},D.default.createElement(L.default,{layout:"inline",className:J.default.addForm},D.default.createElement(K,(0,b.default)({label:"\u672a".concat(c[1],"\u91d1\u989d")},i),D.default.createElement("div",null,(0,I.filterRMB)(u[0],"formatter"))),D.default.createElement(K,(0,b.default)({label:"\u91d1\u989d"},i),t.getFieldDecorator("money",{initialValue:n.money?n.money:0,rules:[{required:!0,message:"\u6b64\u9879\u5fc5\u586b\uff01"}]})(D.default.createElement(E.default,{style:{width:"100%"},step:100,min:0,formatter:function(e){return(0,I.filterRMB)(e,"formatter")},parser:function(e){return(0,I.filterRMB)(e,"parser")}}))),D.default.createElement(K,(0,b.default)({label:"\u56de\u6b3e\u65b9\u5f0f"},i),t.getFieldDecorator("moneybackway",{initialValue:n.moneybackway?"".concat(n.moneybackway):"",rules:[{required:!0,message:"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\uff01"}]})(D.default.createElement(x.default,null,D.default.createElement(z,{value:""},"\u8bf7\u9009\u62e9"),D.default.createElement(z,{value:"1"},"\u7535\u6c47"),D.default.createElement(z,{value:"2"},"\u652f\u7968"),D.default.createElement(z,{value:"3"},"\u94f6\u627f"),D.default.createElement(z,{value:"4"},"\u5546\u627f")))),D.default.createElement(K,(0,b.default)({label:"".concat(c[1],"\u65e5\u671f")},i),t.getFieldDecorator("receivablesdateLong",{initialValue:n.receivablesdateLong?(0,A.default)(n.receivablesdateLong):null,rules:[{required:!0,message:"\u6b64\u9879\u5fc5\u586b\uff01"}]})(D.default.createElement(S.default,null))),D.default.createElement(K,(0,b.default)({label:"\u5907\u6ce8"},i),t.getFieldDecorator("remark",{initialValue:e.remark})(D.default.createElement(j,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}))))))}),ee=L.default.create()(function(e){var t=e.form,a=e.recivePlaceFileModal,l=e.showRevicePlaceFileModal,n=e.placeFile,r={labelCol:{span:7},wrapperCol:{span:13}},d=function(){t.validateFields(function(e,t){var a=t.statisticalmonth?(0,A.default)(t.statisticalmonth).format("YYYY-MM"):"";n(a)})};return D.default.createElement(p.default,{destroyOnClose:!0,title:"\u5f52\u6863\u5408\u540c",visible:a,maskClosable:!1,style:{paddingBottom:"200px"},onOk:function(){return d()},onCancel:function(){return l()}},D.default.createElement(L.default,{layout:"inline",className:J.default.addForm},D.default.createElement("h3",{style:{fontSize:"14px",color:"rgba(0, 0, 0, 0.65)",textAlign:"center"}},D.default.createElement(s.default,{type:"question-circle",style:{color:"#faad14",fontSize:"22px",marginRight:"10px"}}),"\u786e\u5b9a\u8981\u5c06\u8be5\u5408\u540c\u5f52\u6863\u5417\uff08\u5f52\u6863\u540e\u5408\u540c\u4fe1\u606f\u5c06\u4e0d\u5141\u8bb8\u518d\u4fee\u6539\uff09\uff1f"),D.default.createElement(K,(0,b.default)({label:"\u7edf\u8ba1\u6708\u4efd"},r),t.getFieldDecorator("statisticalmonth",{initialValue:e.statisticalmonth?(0,A.default)(e.statisticalmonth):null})(D.default.createElement(Q,{placeholder:"\u8bf7\u9009\u62e9\u6708\u4efd"})))))}),te=L.default.create()(function(e){var t=e.removeModal,a=e.showRemoveModal,l=e.removeType,n=e.handleRemove,r=e.removeModalLoading,d=e.titleArr,c={text:"".concat(d[0]),removeDispatch:"drawbill/removeDraw"};"recive"===l&&(c.text="".concat(d[1]),c.removeDispatch="recivepayment/removeRecive");var u="\u5220\u9664".concat(c.text,"\u8bb0\u5f55");return D.default.createElement(p.default,{destroyOnClose:!0,title:u,visible:t,maskClosable:!1,style:{paddingBottom:"200px"},onOk:function(){return n()},onCancel:function(){return a(!1,"",{})}},D.default.createElement(m.default,{spinning:r},D.default.createElement("div",null,D.default.createElement("p",null,"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u6761".concat(c.text,"\u8bb0\u5f55\u5417\uff1f")))))}),ae=(V=(0,P.connect)(function(e){var t=e.contractdata,a=e.drawbill,l=e.recivepayment,n=e.loading;return{contractdata:t,drawbill:a,recivepayment:l,loading:n.models.contractdata}}),V(q=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,i.default)(this,(e=(0,o.default)(t)).call.apply(e,[this].concat(n))),a.state={urlParams:"",loading:!1,drawLoading:!1,drawModal:!1,drawModalLoading:!1,reciveLoading:!1,reciveModal:!1,reciveModalLoading:!1,provisionalId:"",removeType:"",removeModal:!1,removeModalLoading:!1,infoSource:{},drawSource:[],reciveSource:[],itemRecord:{},contractType:"",totalMount:[0,0],linkContarct:"",showSelectModal:!1,stampModal:!1,recivePlanLoading:!1,recivePaymentPlanData:[],recivePlanModal:!1,recivePlaceFileModal:!1},a.showRecivePlanModal=function(e){var t=a.state.recivePlanModal,l=a.props.dispatch;e&&l({type:"receivableplan/infoRecive",payload:{receivablesplanid:e.receivablesplanid}}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):a.setState({itemRecord:e.data}),a.setState({recivePlanLoading:!1})}),a.setState({recivePlanModal:!t})},a.showStampModal=function(){var e=a.state.stampModal;a.setState({stampModal:!e})},a.currentSave=function(e){var t=a.state,l=t.urlParams,n=t.linkContarct,r=a.props.dispatch,d=e.form;d.validateFields(function(e,t){if(!e){var d=t;d.contractid=l.contractid,t.statisticalmonth&&(d.statisticalmonth=(0,A.default)(t.statisticalmonth).format("YYYY-MM")),d.signingdateLong=t.signingdateLong?(0,A.default)(t.signingdateLong).valueOf():0,d.usesealdateLong=t.usesealdateLong?(0,A.default)(t.usesealdateLong).valueOf():0,t.startEndRange&&2===t.startEndRange.length&&(d.begindateLong=(0,A.default)(t.startEndRange[0]).valueOf(),d.enddateLong=(0,A.default)(t.startEndRange[1]).valueOf()),d.relatedcontractname=n,d.startEndRange=[],a.setState({loading:!0}),r({type:"contractdata/updateData",payload:d}).then(function(e){e.statusCode?(p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({loading:!1})):(a.setState({loading:!1}),r(Y.routerRedux.push({pathname:"/result/result-success",query:{resultType:"1"}})))})}})},a.returnBack=function(){var e=a.props.dispatch;e(Y.routerRedux.push({pathname:"/compact/contract-list"}))},a.showDrawModal=function(e,t){var l=a.props.dispatch;"{}"===JSON.stringify(t)?a.setState({drawModal:!!e,itemRecord:t}):(a.setState({drawModal:!!e,drawModalLoading:!0}),l({type:"drawbill/infoDraw",payload:{drawid:t.drawid}}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):a.setState({itemRecord:e.data}),a.setState({drawModalLoading:!1})}))},a.showReciveModal=function(e,t){var l=a.props.dispatch;"{}"===JSON.stringify(t)?a.setState({reciveModal:!!e,itemRecord:t}):(a.setState({reciveModal:!!e,reciveModalLoading:!0}),l({type:"recivepayment/infoRecive",payload:{receivablesid:t.receivablesid}}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):a.setState({itemRecord:e.data}),a.setState({reciveModalLoading:!1})}))},a.showRemoveModal=function(e,t,l){var n="";n="draw"===t?l.drawid:l.receivablesid,a.setState({removeModal:!!e,removeType:t,provisionalId:n})},a.openSelectContratc=function(e,t){var l=a.state.linkContarct;a.setState({showSelectModal:!!e}),t?(a.setState({linkContarct:t.join("\uff0c")}),a.selectData(t)):(a.child.getCon(),a.child.setState({condata:""===l?[]:l.split("\uff0c")}))},a.selectData=function(e){a.setState({linkContarct:e.join("\uff0c")})},a.publicGetRecivePlan=function(){var e=a.props,t=e.dispatch,l=e.location;t({type:"receivableplan/getRecive",payload:{contractid:l.query.contractid}}).then(function(e){e.statusCode?(p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({recivePlanLoading:!1})):a.setState({recivePaymentPlanData:e.list,recivePlanLoading:!1})})},a.publicGetDraw=function(){var e=a.props,t=e.dispatch,l=e.location;t({type:"drawbill/getDraw",payload:{contractid:l.query.contractid}}).then(function(e){if(e.statusCode)p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({drawLoading:!1});else{var t=e.list;t.map(function(e,a){return t[a].itemIndex=a+1,a}),a.setState({drawSource:t,drawLoading:!1})}})},a.publicGetRecive=function(){var e=a.props,t=e.dispatch,l=e.location;t({type:"recivepayment/getRecive",payload:{contractid:l.query.contractid}}).then(function(e){if(e.statusCode)p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({reciveLoading:!1});else{var t=e.list;t.map(function(e,a){return t[a].itemIndex=a+1,a}),a.setState({reciveSource:t,reciveLoading:!1})}})},a.showPlaceFileModel=function(){var e=a.state.infoSource;"1"===e.bigcategory?a.showRevicePlaceFileModal():p.default.confirm({title:"\u5f52\u6863\u5408\u540c",content:"\u786e\u5b9a\u8981\u5c06\u8be5\u5408\u540c\u5f52\u6863\u5417\uff08\u5f52\u6863\u540e\u5408\u540c\u4fe1\u606f\u5c06\u4e0d\u5141\u8bb8\u518d\u4fee\u6539\uff09\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return a.placeFile()}})},a.showRevicePlaceFileModal=function(){var e=a.state.recivePlaceFileModal;a.setState({recivePlaceFileModal:!e})},a.showFinishModel=function(){p.default.confirm({title:"\u5b8c\u6210\u5408\u540c",content:"\u786e\u5b9a\u8981\u5c06\u5b8c\u6210\u8be5\u5408\u540c\u5417\uff08\u5b8c\u6210\u540e\u7684\u5408\u540c\u6240\u6709\u4fe1\u606f\u5c06\u4e0d\u5141\u8bb8\u518d\u4fee\u6539\uff09\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return a.finishFile()}})},a.placeFile=function(e){var t=a.props.dispatch,l=a.state,n=l.urlParams,r=l.infoSource,c={};c.contractid=n.contractid,c.contractstatus=3,"1"===r.bigcategory&&(c.statisticalmonth=e),t({type:"contractdata/updateData",payload:c}).then(function(e){d.default.success("\u5f52\u6863\u6210\u529f\uff01"),a.setState({recivePlaceFileModal:!1}),t({type:"contractdata/getInfo",payload:{contractid:c.contractid}}).then(function(e){e.statusCode?(p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({loading:!1})):a.setState({infoSource:e.data,loading:!1,contractType:e.data.bigcategory,totalMount:[e.data.totalprice,100],linkContarct:e.data.relatedcontractname})})})},a.finishFile=function(){var e=a.props.dispatch,t=a.state.urlParams,l={};l.contractid=t.contractid,l.contractstatus=4,e({type:"contractdata/updateData",payload:l}).then(function(t){d.default.success("\u5408\u540c\u5df2\u6210\u529f\u5b8c\u6210\uff01"),e({type:"contractdata/getInfo",payload:{contractid:l.contractid}}).then(function(e){e.statusCode?(p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({loading:!1})):a.setState({infoSource:e.data,loading:!1,contractType:e.data.bigcategory,totalMount:[e.data.totalprice,100],linkContarct:e.data.relatedcontractname})})})},a.handleAddRecivePlan=function(e,t,l){var n=e.form,r=a.props.dispatch,d=a.state.urlParams;n.validateFields(function(e,n){if(!e){var c=n,u="receivableplan/addRecive";c.contractid=d.contractid,c.receivablesplandateLong&&(c.receivablesplandateLong=(0,A.default)(c.receivablesplandateLong).valueOf()),"update"===t&&(u="receivableplan/updateRecive",c.receivablesplanid=l),r({type:u,payload:c}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):p.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:e.msg,onOk:function(){a.publicGetRecivePlan()}}),a.showRecivePlanModal()})}})},a.handleRemoveRecivePlan=function(e,t){p.default.confirm({title:"\u5220\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u5e8f\u53f7\u4e3a\u3010".concat(e+1,"\u3011\u7684\u8ba1\u5212\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return a.removeRecivePlan(t)}})},a.removeRecivePlan=function(e){var t=a.props.dispatch,l={receivablesplanid:e.receivablesplanid};t({type:"receivableplan/removeRecive",payload:l}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):p.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:e.msg,onOk:function(){a.publicGetRecivePlan()}})})},a.handleAddStamp=function(e){var t=e.form,l=a.props.dispatch,n=a.state.urlParams;t.validateFields(function(e,t){if(!e){var r=t;r.contractid=n.contractid,t.statisticalmonth&&(r.statisticalmonth=(0,A.default)(t.statisticalmonth).format("YYYY-MM")),r.usesealdateLong=t.usesealdateLong?(0,A.default)(t.usesealdateLong).valueOf():0,r.contractstatus=2,l({type:"contractdata/updateData",payload:r}).then(function(e){l({type:"contractdata/getInfo",payload:{contractid:r.contractid}}).then(function(e){e.statusCode?(p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}),a.setState({loading:!1})):(d.default.success("\u4fdd\u5b58\u5370\u7ae0\u4fe1\u606f\u6210\u529f\uff01"),a.setState({infoSource:e.data,loading:!1,contractType:e.data.bigcategory,totalMount:[e.data.totalprice,100],linkContarct:e.data.relatedcontractname}))})}),a.showStampModal()}})},a.handleAddDraw=function(e,t,l){var n=e.form,r=a.props.dispatch,d=a.state.urlParams;n.validateFields(function(e,n){if(!e){var c=n,u="drawbill/addDraw";c.contractid=d.contractid,c.drawdateLong&&(c.drawdateLong=(0,A.default)(c.drawdateLong).valueOf()),"update"===t&&(u="drawbill/updateDraw",c.drawid=l),a.setState({drawModalLoading:!0}),r({type:u,payload:c}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):p.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:e.msg,onOk:function(){a.setState({drawLoading:!0,drawModal:!1}),a.publicGetDraw()}}),a.setState({drawModalLoading:!1})})}})},a.handleAddRecive=function(e,t,l){var n=e.form,r=a.props.dispatch,d=a.state.urlParams;n.validateFields(function(e,n){if(!e){var c=n,u="recivepayment/addRecive";c.contractid=d.contractid,c.receivablesdateLong&&(c.receivablesdateLong=(0,A.default)(c.receivablesdateLong).valueOf()),"update"===t&&(u="recivepayment/updateRecive",c.receivablesid=l),a.setState({reciveModalLoading:!0}),r({type:u,payload:c}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):p.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:e.msg,onOk:function(){a.setState({reciveLoading:!0,reciveModal:!1}),a.publicGetRecive()}}),a.setState({reciveModalLoading:!1})})}})},a.handleRemove=function(){var e=a.props.dispatch,t=a.state,l=t.removeType,n=t.provisionalId,r={},d="";a.setState({removeModalLoading:!0}),"draw"===l?(r.drawid=n,d="drawbill/removeDraw"):(r.receivablesid=n,d="recivepayment/removeRecive"),e({type:d,payload:r}).then(function(e){e.statusCode?p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(e.statusCode)}):p.default.success({title:"\u64cd\u4f5c\u4fe1\u606f",content:"\u5220\u9664\u6210\u529f\uff01",onOk:function(){"draw"===l?(a.setState({drawLoading:!0,removeModal:!1}),a.publicGetDraw()):(a.setState({reciveLoading:!0,removeModal:!1}),a.publicGetRecive())}}),a.setState({removeModalLoading:!1})})},a.onSelectRef=function(e){a.child=e},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.location,l=t.dispatch;this.setState({urlParams:a.query,loading:!0,drawLoading:!0,reciveLoading:!0}),l({type:"contractdata/getInfo",payload:{contractid:a.query.contractid}}).then(function(t){t.statusCode?(p.default.error({title:"\u9519\u8bef\u4fe1\u606f",content:"\u670d\u52a1\u7aef\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a ".concat(t.statusCode)}),e.setState({loading:!1})):e.setState({infoSource:t.data,loading:!1,contractType:t.data.bigcategory,totalMount:[t.data.totalprice,100],linkContarct:t.data.relatedcontractname})}),this.publicGetRecivePlan(),this.publicGetDraw(),this.publicGetRecive()}},{key:"render",value:function(){var e=this,t=this.state,a=t.infoSource,l=t.drawSource,n=t.reciveSource,d=t.loading,c=t.drawModal,u=t.drawLoading,i=t.drawModalLoading,o=t.reciveModal,f=t.reciveLoading,s=t.reciveModalLoading,p=t.removeModal,E=t.removeModalLoading,g=t.removeType,h=t.itemRecord,y=t.contractType,M=t.totalMount,R=t.linkContarct,S=t.showSelectModal,C=t.stampModal,x=t.recivePaymentPlanData,L=(t.recivePlanLoading,t.recivePlanModal),P=t.recivePlaceFileModal,Y=this.props.rowKey,B=M.concat([]),V=M.concat([]),q=[];q="1"===y?["\u5f00\u7968","\u56de\u6b3e"]:["\u6536\u7968","\u4ed8\u6b3e"],a.titleArr=q;var G={stampModal:C,showStampModal:this.showStampModal,handleAddStamp:this.handleAddStamp},K={recivePaymentPlanData:x,currentSave:this.currentSave,returnBack:this.returnBack,openSelectContratc:this.openSelectContratc,showStampModal:this.showStampModal,showPlaceFileModel:this.showPlaceFileModel,showRecivePlanModal:this.showRecivePlanModal,handleRemoveRecivePlan:this.handleRemoveRecivePlan,showFinishModel:this.showFinishModel},z=K;z.infoSource=a,z.titleArr=q,z.finishFile=this.showParentMethods,z.showFinishModel=this.showFinishModel;var j={drawModal:c,drawModalLoading:i,itemRecord:h,titleArr:q,drawNot:B,showDrawModal:this.showDrawModal,handleAddDraw:this.handleAddDraw},W={reciveModal:o,reciveModalLoading:s,itemRecord:h,titleArr:q,reciveNot:V,showReciveModal:this.showReciveModal,handleAddRecive:this.handleAddRecive},Q={removeModal:p,removeModalLoading:E,removeType:g,titleArr:q},H={recivePlanModal:L,titleArr:q,itemRecord:h,showRecivePlanModal:this.showRecivePlanModal,handleAddRecivePlan:this.handleAddRecivePlan},ae={recivePlaceFileModal:P,showRevicePlaceFileModal:this.showRevicePlaceFileModal,placeFile:this.placeFile},le={showRemoveModal:this.showRemoveModal,handleRemove:this.handleRemove},ne={showModal:S,linkContarct:R},re={openSelectContratc:this.openSelectContratc,onSelectRef:this.onSelectRef},de=[];if(l.length){var ce=0,ue=0;l.forEach(function(e){ce+=Number(e.money),ue+=Number(e.moneypercent)}),ue=ue.toFixed(2),B[0]=M[0]-ce,B[1]=(M[1]-ue).toFixed(2),de=l.concat({itemIndex:"\u603b\u8ba1",drawid:"total",money:ce,moneypercent:ue})}var ie=function(e,t,a){var n={children:e,props:{}};return a===l.length&&(n.props.colSpan=0),n},oe=[{title:"\u5e8f\u53f7",dataIndex:"itemIndex",key:"itemIndex",render:function(e,t,a){return a===l.length?{children:D.default.createElement("span",{style:{fontWeight:600}},"\u603b\u8ba1"),props:{colSpan:1}}:e}},{title:"\u91d1\u989d",dataIndex:"money",key:"money",render:function(e){return ie((0,I.filterRMB)(e,"formatter"))}},{title:"\u6bd4\u7387",dataIndex:"moneypercent",key:"moneypercent",render:function(e){return ie("".concat(e,"%"))}},{title:"\u5f00\u7968\u7c7b\u578b",dataIndex:"billingtype",key:"billingtype",render:function(e){var t;switch(e){case 1:t="\u6280\u672f\u670d\u52a1";break;case 2:t="\u4ea7\u54c1\u9500\u552e";break;case 3:t="\u5de5\u7a0b\u65bd\u5de5";break;default:break}return t}},{title:"\u7a0e\u7387",dataIndex:"taxrate",key:"taxrate",render:function(e){return ie(e?"".concat(e,"%"):null)}},{title:"".concat(q[0],"\u65e5\u671f"),dataIndex:"drawdate",key:"drawdate",render:function(e){return ie(e?(0,A.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatetime",key:"updatetime",render:function(e){return ie(e?(0,A.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",render:function(e){return ie(e?"".concat(e):null)}}],fe=[];if(n.length){var se=0,me=0;n.forEach(function(e){se+=Number(e.money),me+=Number(e.moneypercent)}),me=me.toFixed(2),V[0]=M[0]-se,V[1]=(M[1]-me).toFixed(2),fe=n.concat({itemIndex:"\u603b\u8ba1",receivablesid:"total",money:se,moneypercent:me})}var pe=function(e,t,a){var l={children:e,props:{}};return a===n.length&&(l.props.colSpan=0),l},ve=[{title:"\u5e8f\u53f7",dataIndex:"itemIndex",key:"itemIndex",render:function(e,t,a){return a===n.length?{children:D.default.createElement("span",{style:{fontWeight:600}},"\u603b\u8ba1"),props:{colSpan:1}}:e}},{title:"\u91d1\u989d",dataIndex:"money",key:"money",render:function(e){return pe((0,I.filterRMB)(e,"formatter"))}},{title:"\u6bd4\u7387",dataIndex:"moneypercent",key:"moneypercent",render:function(e){return pe("".concat(e,"%"))}},{title:"\u56de\u6b3e\u65b9\u5f0f",dataIndex:"moneybackway",key:"moneybackway",render:function(e){var t;switch(e){case 1:t="\u7535\u6c47";break;case 2:t="\u652f\u7968";break;case 3:t="\u94f6\u627f";break;case 4:t="\u5546\u627f";break;default:break}return t}},{title:"".concat(q[1],"\u65e5\u671f"),dataIndex:"receivablesdate",key:"receivablesdate",render:function(e){return pe(e?(0,A.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatetime",key:"updatetime",render:function(e){return pe(e?(0,A.default)(e).format("YYYY-MM-DD"):null)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",render:function(e){return ie(e?"".concat(e):null)}}];return 4!==a.contractstatus&&(oe.push({title:"\u64cd\u4f5c",render:function(t,a,n){return n<l.length&&D.default.createElement(D.Fragment,null,D.default.createElement("a",{style:{whiteSpace:"nowrap"},onClick:function(){return e.showDrawModal(!0,a)}},"\u7f16\u8f91"),D.default.createElement(k.default,{type:"vertical"}),D.default.createElement("a",{style:{color:"red",whiteSpace:"nowrap"},onClick:function(){return e.showRemoveModal(!0,"draw",a)}},"\u5220\u9664"))}}),ve.push({title:"\u64cd\u4f5c",render:function(t,a,l){return l<n.length&&D.default.createElement(D.Fragment,null,D.default.createElement("a",{style:{whiteSpace:"nowrap"},onClick:function(){return e.showReciveModal(!0,a)}},"\u7f16\u8f91"),D.default.createElement(k.default,{type:"vertical"}),D.default.createElement("a",{style:{color:"red",whiteSpace:"nowrap"},onClick:function(){return e.showRemoveModal(!0,"recive",a)}},"\u5220\u9664"))}})),D.default.createElement(F.default,{title:"\u6536\u652f\u5408\u540c\u8be6\u60c5"},D.default.createElement(m.default,{spinning:d},D.default.createElement(r.default,{bordered:!1},D.default.createElement("div",{className:J.default.reBtnLine,style:{borderBottom:"1px dashed #eee"}},D.default.createElement(w.default,{className:J.default.reBtn,type:"danger",icon:"rollback",onClick:function(){e.returnBack()}},"\u8fd4\u56de\u4e0a\u4e00\u7ea7")),D.default.createElement("div",{className:J.default.tableList},a.contractstatus<3?D.default.createElement(X,(0,b.default)({},a,K,{linkContarct:R})):D.default.createElement(O.default,(0,b.default)({},z,{linkContarct:R}))))),D.default.createElement(r.default,{style:{marginTop:"24px"},bordered:!1,title:q[0]},D.default.createElement("div",{className:J.default.clearFloat},D.default.createElement(w.default,{icon:"plus",type:"primary",onClick:function(){return e.showDrawModal(!0,{})},style:{marginBottom:"20px"}},"\u65b0\u589e".concat(q[0])),D.default.createElement(N.default,{titleArr:["\u672a".concat(q[0],"\u91d1\u989d"),"\u672a".concat(q[0],"\u6bd4\u7387")],dataNot:[(0,I.filterRMB)(B[0],"formatter"),"".concat(B[1],"%")]}),D.default.createElement(v.default,{loading:u,pagination:!1,rowKey:Y||"drawid",dataSource:de,columns:oe}))),D.default.createElement(r.default,{style:{marginTop:"24px"},bordered:!1,title:q[1]},D.default.createElement("div",null,D.default.createElement(w.default,{icon:"plus",type:"primary",onClick:function(){return e.showReciveModal(!0,{})},style:{marginBottom:"20px"}},"\u65b0\u589e".concat(q[1])),D.default.createElement(N.default,{titleArr:["\u672a".concat(q[1],"\u91d1\u989d"),"\u672a".concat(q[1],"\u6bd4\u7387")],dataNot:[(0,I.filterRMB)(V[0],"formatter"),"".concat(V[1],"%")]}),D.default.createElement(v.default,{loading:f,pagination:!1,rowKey:Y||"receivablesid",dataSource:fe,columns:ve}))),D.default.createElement(U,j),D.default.createElement($,W),D.default.createElement(_,G),D.default.createElement(te,(0,b.default)({},Q,le)),D.default.createElement(T.default,(0,b.default)({},ne,re)),D.default.createElement(Z,H),D.default.createElement(ee,ae))}}]),t}(D.PureComponent))||q),le=ae;t.default=le},mr0z:function(e,t,a){"use strict";var l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=l(a("2/Rp"));a("14J3");var r=l(a("BMrR")),d=l(a("pVnL"));a("jCWc");var c=l(a("kPKH"));a("FJo9");var u=l(a("L41K"));a("y8nQ");var i=l(a("Vl3Y")),o=l(a("q1tI")),f=l(a("wd/R"));a("XDpg");var s=a("4ZfN"),m=l(a("Peit")),p=a("AvXd"),v=l(a("A4CJ")),E=l(a("mDQx")),g=l(a("mNfy"));f.default.locale("zh-cn");var h=i.default.Item,y=u.default.Step,b={md:12,sm:24},M={labelCol:{span:7},wrapperCol:{span:13}},w=function(e,t){var a=[],l="";return a[0]=(0,f.default)(e).format("YYYY-MM-DD"),a[1]=(0,f.default)(t).format("YYYY-MM-DD"),l=a.join(" - "),l},k=function(e){var t=e.infoSource,a=e.showFinishModel;return o.default.createElement(i.default,{layout:"inline",className:[v.default.addForm,E.default.showParams]},o.default.createElement("h3",{className:v.default.inputBlockTitle},"\u6d41\u7a0b\u72b6\u6001"),o.default.createElement(u.default,{style:{margin:"24px 0px",padding:"0px 24px"},current:t.contractstatus-1},o.default.createElement(y,{title:"\u5f85\u76d6\u7ae0",description:"\u521b\u5efa\u5b8c\u6210\uff0c\u7b49\u5f85\u76d6\u7ae0"}),o.default.createElement(y,{title:"\u5f85\u5f52\u6863",description:"\u5df2\u76d6\u7ae0\uff0c\u7b49\u5f85\u5f52\u6863"}),o.default.createElement(y,{title:"\u6267\u884c\u4e2d",description:"\u8be5\u5408\u540c\u6b63\u5728\u6267\u884c"}),o.default.createElement(y,{title:"\u5df2\u5b8c\u6210",description:"\u8be5\u5408\u540c\u5df2\u7ecf\u5b8c\u6210"})),o.default.createElement("h3",{className:v.default.inputBlockTitle},"\u5408\u540c\u6982\u51b5"),o.default.createElement(r.default,null,o.default.createElement(c.default,{className:g.default.lineTextarea},o.default.createElement(h,{label:"\u5408\u540c\u540d\u79f0"},o.default.createElement("div",null,t.contractname))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5408\u540c\u7f16\u53f7"},M),o.default.createElement("div",null,t.contractno))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u4e1a\u52a1\u7c7b\u578b"},M),o.default.createElement("div",null,(0,p.businesstypeFilter)(t.businesstype)))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5408\u540c\u5927\u7c7b"},M),o.default.createElement("div",null,"1"===t.bigcategory?"\u6536\u5165\u5408\u540c":"\u652f\u51fa\u5408\u540c"))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5408\u540c\u5c0f\u7c7b"},M),o.default.createElement("div",null,(0,p.smallcategoryFilter)(t.smallcategory)))),o.default.createElement(c.default,{className:g.default.lineTextarea},o.default.createElement(h,{label:"\u5408\u4f5c\u65b9"},o.default.createElement("div",null,t.suppliername))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5408\u4f5c\u65b9\u8d1f\u8d23\u4eba"},M),o.default.createElement("div",null,t.supplierresponsibleperson))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u8054\u7cfb\u7535\u8bdd"},M),o.default.createElement("div",null,t.suppliertelephone))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u8d23\u4efb\u90e8\u95e8"},M),o.default.createElement("div",null,t.responsibledepartment))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u7ecf\u529e\u4eba"},M),o.default.createElement("div",null,t.responsibleperson))),"1"===t.bigcategory?"":o.default.createElement(c.default,{className:g.default.lineTextarea},o.default.createElement(h,{label:"\u5408\u540c\u5173\u8054\u60c5\u51b5"},o.default.createElement("div",null,""===t.relatedcontractname?"\u65e0":t.relatedcontractname)))),o.default.createElement("h3",{className:v.default.inputBlockTitle},"\u5408\u540c\u6761\u6b3e"),o.default.createElement(r.default,null,o.default.createElement(c.default,{className:g.default.lineTextarea},o.default.createElement(h,{label:"\u5408\u540c\u6807\u7684"},o.default.createElement("div",null,t.contractcontent))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u6570\u91cf"},M),o.default.createElement("div",null,t.measurementnumber))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u8ba1\u91cf\u5355\u4f4d"},M),o.default.createElement("div",null,t.measurementunit))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5355\u4ef7"},M),o.default.createElement("div",null,(0,s.filterRMB)(t.unitprice,"formatter")))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u603b\u6570\u989d"},M),o.default.createElement("div",null,(0,s.filterRMB)(t.totalprice,"formatter")))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u7b7e\u7ea6\u65e5\u671f"},M),o.default.createElement("div",null,t.signingdateLong?(0,f.default)(t.signingdateLong).format("YYYY-MM-DD"):null))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5f00\u59cb\u4e0e\u7ed3\u675f\u65e5\u671f"},M),o.default.createElement("div",null,t.begindateLong&&t.enddateLong?w(t.begindateLong,t.enddateLong):null)))),o.default.createElement("h3",{className:v.default.inputBlockTitle},"\u7528\u5370\u5ba1\u6279"),o.default.createElement(r.default,null,o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u7528\u5370\u65e5\u671f"},M),o.default.createElement("div",null,t.usesealdate?(0,f.default)(t.usesealdate).format("YYYY-MM-DD"):null))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u7528\u5370\u4eba"},M),o.default.createElement("div",null,t.usesealperson))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u5ba1\u6279\u65b9\u5f0f"},M),o.default.createElement("div",null,(0,p.auditingsealtypeFilter)(t.auditingsealtype)))),o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u4efd\u6570"},M),o.default.createElement("div",null,t.sealnumber))),"1"===t.bigcategory?o.default.createElement(c.default,b,o.default.createElement(h,(0,d.default)({label:"\u7edf\u8ba1\u6708\u4efd"},M),o.default.createElement("div",null,t.statisticalmonth?(0,f.default)(t.statisticalmonth).format("YYYY-MM"):null))):""),o.default.createElement(m.default,e),o.default.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},3===t.contractstatus?o.default.createElement(n.default,{type:"primary",className:v.default.listDataBtn,title:"\u5b8c\u6210",icon:"caret-right",onClick:function(){return a()}},"\u5b8c\u6210"):""))},R=k;t.default=R}}]);